---
layout: post
title:  "Zapierの設定"
date:   2019-01-28
excerpt: "Zapierを用いて複数のサービスを連動させる"
project: true
tag:
- システム
comments: false
---

# 初めに
## やりたいこと
チーム内の情報共有にRSSリーダーであるinoreaderを使用しているのですが、誰かがせっかく新しく記事を共有してくれてもなかなか他の人気づきづらいという問題を解決するため、今回は、誰かが新しい記事をinoreader内で共有したときにDiscordに通知を自動で送れるようなシステムを導入しました。

最初は、DiscordにあるAPIを使用してうまくできないかと思ったのですが、tokenの取得が何故かうまく行かず（&英語の文献含めネット上に情報があまり落ちてなく)今回はZapierを使って実装をしました。
(APIを使用した方の実装もやってみたい)

Zapierめちゃめちゃ使いやすいです。（これくらいシンプルな連動なら、コード打つ必要は全くないです）

## Zapierとは
Zapier（ザピエル）はアメリカが開発した[RPA](https://ja.wikipedia.org/wiki/%E3%83%AD%E3%83%9C%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E3%83%BB%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%83%BB%E3%82%AA%E3%83%BC%E3%83%88%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3)の1つで、様々なサービスやアプリを連携させて動作を自動化させるものです。
AとBというサービスを登録しておき、
Aのサービスがこういう処理をしたとき（Triggerの設定）、Bのサービスをこう動作させる（Actionの設定）という設定を予めZapierの設定しておくことで、色々な作業を自動化することができます。

PRAの中には他にも有名なところで「IFTTT」というものもありますが、Zapierのほうが対応しているサービス数が多く、さらに２つ以上のサービスを連携させることもできることから今回はZapierを使用してました。
(詳しくは[こちらの記事](http://rpa.ne.jp/post-88/)がわかりやすかったです)

# 実装方法
ざっくり言うと、Triggerの設定とActionの設定をするだけです。

![スライド1.png](https://qiita-image-store.s3.amazonaws.com/0/200298/67a841de-c75d-f64f-dd52-25ae772f13d8.png)


## Zapierに登録　→ 「Make a Zip!」
まずは、[Zapier](https://zapier.com/app/home)からアカウント登録をしましょう。
そしたら、右上のボタンから「Make a Zip!」を作成します！

## Triggerの設定
まずは、Triggerとして設定したいサービス（今回の場合「rssリーダー」→「inoreaderのチームのRSSフィードURL」）を選択し、起動条件などを選択し、実際にその条件のときにZapierがきちんと検知するかテストを行います。
画面の手順通り進めていれば問題ないかと思います。

一方、用意されている選択以上のことをしようとしている場合は、Zapierは使えないということになります。（諦めて自分でプログラムを書きましょう）


## Actionの設定
Triggerのテストが終わったら、次に Actionの設定をします。
まず、Action先のサービス（今回の場合はDiscord）を選択し、具体的なチャンネルやBotの名前画像などを設定した後、実際に動くのかテストを行います。

こちらも問題なければ、Zapを「run」にしておけば、５分おきに、Trigger条件が満たされていないか確認し、満たされていればActionが発動されるという動作が自動化されます！



# 終わりに
めちゃめちゃ便利なので、なにかサービス間同士で連動させたいことがある場合は、今後まずZapierでできないか試みることにします。

一方、用意されている機能はシンプルなものしかなく、少し複雑な動作をさせたいなどという場合はもちろん自分でプログラムを開発する必要があるのでそこら辺は自分でやるしか無いといった次第です。
